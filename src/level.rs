use {
    super::{
        asset_owner::TextureAtlasOwner,
        player::{self, Player},
        tile::{self, Tile, TileIndex, TILE_SIZE},
        GameState,
    },
    bevy::prelude::*,
};

pub const LEVEL_SIZE: Vec3 = Vec3::new(22., 27., 2.);

const LEVEL_LAYOUT: [[[TileIndex; LEVEL_SIZE.x as usize]; LEVEL_SIZE.y as usize];
    LEVEL_SIZE.z as usize] = [
    [
        [TileIndex::Grass1; LEVEL_SIZE.x as usize],
        [TileIndex::Grass1; LEVEL_SIZE.x as usize],
        [TileIndex::Grass1; LEVEL_SIZE.x as usize],
        [TileIndex::Grass1; LEVEL_SIZE.x as usize],
        [
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
        ],
        [
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
        ],
        [
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
        ],
        [
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
        ],
        [
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
        ],
        [
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
        ],
        [
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
        ],
        [
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
        ],
        [
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
        ],
        [
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
        ],
        [
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
        ],
        [
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
        ],
        [
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
        ],
        [
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
        ],
        [
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
        ],
        [
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
        ],
        [
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Gravel1,
            TileIndex::Gravel1,
            TileIndex::Gravel1,
            TileIndex::Gravel1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
        ],
        [
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Gravel1,
            TileIndex::Gravel1,
            TileIndex::Gravel1,
            TileIndex::Gravel1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
        ],
        [
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Gravel1,
            TileIndex::Gravel1,
            TileIndex::Gravel1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Floor1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
            TileIndex::Grass1,
        ],
        [TileIndex::Grass1; LEVEL_SIZE.x as usize],
        [TileIndex::Grass1; LEVEL_SIZE.x as usize],
        [TileIndex::Grass1; LEVEL_SIZE.x as usize],
        [TileIndex::Grass1; LEVEL_SIZE.x as usize],
    ],
    [
        [TileIndex::Nothing; LEVEL_SIZE.x as usize],
        [TileIndex::Nothing; LEVEL_SIZE.x as usize],
        [TileIndex::Nothing; LEVEL_SIZE.x as usize],
        [TileIndex::Nothing; LEVEL_SIZE.x as usize],
        [
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallTopLeft,
            TileIndex::WallTop,
            TileIndex::WallTop,
            TileIndex::WallTop,
            TileIndex::WallTop,
            TileIndex::WallTopRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
        ],
        [
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallLeft,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
        ],
        [
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallLeft,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
        ],
        [
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallTopLeft,
            TileIndex::WallTop,
            TileIndex::WallTop,
            TileIndex::WallTop,
            TileIndex::CornerTopLeft,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::CornerTopRight,
            TileIndex::WallTop,
            TileIndex::WallTop,
            TileIndex::WallTop,
            TileIndex::WallTopRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
        ],
        [
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallLeft,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallTopLeft,
            TileIndex::WallTop,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallTopRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
        ],
        [
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallLeft,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallLeft,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
        ],
        [
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallBottomLeft,
            TileIndex::WallBottom,
            TileIndex::WallBottom,
            TileIndex::WallBottom,
            TileIndex::WallLeft,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
        ],
        [
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallLeft,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallLeft,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
        ],
        [
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallLeft,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallBottomLeft,
            TileIndex::WallBottom,
            TileIndex::Nothing,
            TileIndex::WallBottom,
            TileIndex::WallBottomRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
        ],
        [
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallLeft,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallLeft,
            TileIndex::WallBottom,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
        ],
        [
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallLeft,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallLeft,
            TileIndex::WallLeft,
            TileIndex::Nothing,
            TileIndex::WallRight,
            TileIndex::WallTop,
            TileIndex::Nothing,
            TileIndex::WallBottomLeft,
            TileIndex::WallBottomRight,
            TileIndex::Nothing,
            TileIndex::WallTopRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
        ],
        [
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallTopLeft,
            TileIndex::Nothing,
            TileIndex::WallTopRight,
            TileIndex::Nothing,
            TileIndex::WallLeft,
            TileIndex::WallLeft,
            TileIndex::Nothing,
            TileIndex::WallRight,
            TileIndex::Nothing,
            TileIndex::Player,
            TileIndex::Nothing,
            TileIndex::WallLeft,
            TileIndex::Nothing,
            TileIndex::WallRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
        ],
        [
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallBottomLeft,
            TileIndex::Nothing,
            TileIndex::WallRight,
            TileIndex::Nothing,
            TileIndex::WallLeft,
            TileIndex::WallLeft,
            TileIndex::Nothing,
            TileIndex::WallRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallLeft,
            TileIndex::Nothing,
            TileIndex::WallRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
        ],
        [
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallLeft,
            TileIndex::Nothing,
            TileIndex::WallRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallRight,
            TileIndex::WallTop,
            TileIndex::WallTop,
            TileIndex::WallTop,
            TileIndex::WallTop,
            TileIndex::WallTop,
            TileIndex::WallTopRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
        ],
        [
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::UWall,
            TileIndex::Nothing,
            TileIndex::UWall,
            TileIndex::WallBottom,
            TileIndex::WallLeft,
            TileIndex::WallLeft,
            TileIndex::Nothing,
            TileIndex::WallRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
        ],
        [
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallLeft,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallBottomLeft,
            TileIndex::WallBottomLeft,
            TileIndex::Nothing,
            TileIndex::WallBottomRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
        ],
        [
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallBottomLeft,
            TileIndex::WallBottom,
            TileIndex::WallBottom,
            TileIndex::WallBottom,
            TileIndex::WallLeft,
            TileIndex::Gravel1,
            TileIndex::Gravel1,
            TileIndex::WallRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
        ],
        [
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Gravel1,
            TileIndex::Gravel1,
            TileIndex::Gravel1,
            TileIndex::WallRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
        ],
        [
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Gravel1,
            TileIndex::Gravel1,
            TileIndex::WallRight,
            TileIndex::WallBottom,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::WallBottomRight,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
            TileIndex::Nothing,
        ],
        [TileIndex::Nothing; LEVEL_SIZE.x as usize],
        [TileIndex::Nothing; LEVEL_SIZE.x as usize],
        [TileIndex::Nothing; LEVEL_SIZE.x as usize],
        [TileIndex::Nothing; LEVEL_SIZE.x as usize],
    ],
];

pub fn spawn_level_objects(
    mut cmds: Commands,
    tile_tex_atlas: Res<TextureAtlasOwner<Tile>>,
    player_tex_atlas: Res<TextureAtlasOwner<Player>>,
) {
    for z in 0..LEVEL_SIZE.z as usize {
        for y in 0..LEVEL_SIZE.y as usize {
            for x in 0..LEVEL_SIZE.x as usize {
                let pos = (Transform::from_translation(
                    (-Vec2::new(LEVEL_SIZE.x - 1., LEVEL_SIZE.y - 1.) * TILE_SIZE / 2.)
                        .extend(default()),
                ) * Transform::from_translation(
                    (Vec2::new(x as f32, LEVEL_SIZE.y - y as f32 - 1.) * TILE_SIZE)
                        .extend(default()),
                ))
                .translation
                .truncate();
                match LEVEL_LAYOUT[z][y][x] {
                    TileIndex::Nothing => (),
                    TileIndex::Player => player::spawn_player(&mut cmds, pos, &player_tex_atlas),
                    idx @ _ => tile::spawn_tile(
                        &mut cmds,
                        pos,
                        &tile_tex_atlas,
                        LEVEL_LAYOUT[z][y][x] as usize,
                        z as f32,
                        idx,
                    ),
                }
            }
        }
    }
}

pub fn level_plugin(app: &mut App) {
    app.add_systems(OnEnter(GameState::Playing), spawn_level_objects);
}
